import 'package:flutter/material.dart';import 'package:flutter_chat_bubble/chat_bubble.dart';import 'package:get/get.dart';import 'package:open_ai/controller/main_screen_controller.dart';class MainScreen extends StatelessWidget {  const MainScreen({Key? key}) : super(key: key);  @override  Widget build(BuildContext context) {    Get.put(Main_screen_controller());    return GetBuilder<Main_screen_controller>(builder: (logic) {      return Scaffold(        backgroundColor: Colors.black,        appBar: AppBar(          elevation: 0,          backgroundColor: Colors.black,          title: Text(            'OPEN AI',            style: TextStyle(fontSize: 22, color: Colors.white60),          ),          centerTitle: true,        ),        body: Container(            color: Colors.black,            child: Column(              children: <Widget>[                Expanded(                  child: Container(                    color: Colors.grey[200],                    child: ListView.builder(                      itemCount: logic.chat.length,                      itemBuilder: (BuildContext context, int index) {                        return Column(                          children: [                            getSenderView(                              ChatBubbleClipper1(type: BubbleType.sendBubble),                              context,                              logic.chat[index]['user'],                            ),                            getReceiverView(                              ChatBubbleClipper4(                                  type: BubbleType.receiverBubble),                              context,                              logic.chat[index]['gpt'],                            ),                          ],                        );                      },                    ),                  ),                ),                Container(                  decoration: BoxDecoration(                    borderRadius: BorderRadius.circular(50),                  ),                  margin: EdgeInsets.only(bottom: 8.0, left: 8.0, right: 8.0),                  child: Row(                    children: <Widget>[                      Flexible(                        child: TextField(                          style: TextStyle(                            color: Colors.white60,                          ),                          controller: logic.send_controller,                          onChanged: (String text) {},                          // onSubmitted: _handleSubmitted,                          decoration: InputDecoration.collapsed(                              hintText: 'write ..',                              hintStyle: TextStyle(                                  fontSize: 14.0, color: Colors.white60)),                        ),                      ),                      Container(                        margin: EdgeInsets.symmetric(horizontal: 4.0),                        child: IconButton(                            icon: Icon(Icons.send,color: Colors.white60,),                            onPressed: () async {                              await logic.send_data(logic.send_controller.text);                            }),                      ),                    ],                  ),                ),                // Row(                //   children: <Widget>[                //     Expanded(                //       child: Padding(                //         padding: const EdgeInsets.all(8.0),                //         child: TextField(                //           decoration: InputDecoration(                //             hintText: 'Type your message here',                //             border: OutlineInputBorder(),                //           ),                //           maxLines: null,                //         ),                //       ),                //     ),                //     IconButton(                //       icon: Icon(Icons.send),                //       onPressed: () {},                //     ),                //   ],                // ),              ],            )),      );    });  }}getReceiverView(CustomClipper clipper, BuildContext context, String txt) =>    ChatBubble(      clipper: clipper,      backGroundColor: Color(0xffE7E7ED),      margin: EdgeInsets.only(top: 20),      child: Container(        constraints: BoxConstraints(          maxWidth: MediaQuery.of(context).size.width * 0.7,        ),        child: Text(          "${txt}",          style: TextStyle(color: Colors.black),        ),      ),    );getSenderView(CustomClipper clipper, BuildContext context, String txt) =>    ChatBubble(      clipper: clipper,      alignment: Alignment.topRight,      margin: EdgeInsets.only(top: 20),      backGroundColor: Colors.blue,      child: Container(        constraints: BoxConstraints(          maxWidth: MediaQuery.of(context).size.width * 0.7,        ),        child: Text(          "${txt}",          style: TextStyle(color: Colors.white),        ),      ),    );